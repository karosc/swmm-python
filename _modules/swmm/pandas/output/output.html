

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../../_static/favicon.png">
    
    
      
        <title>swmm.pandas.output.output - swmm-pandas</title>
      
    
    
      <link rel="stylesheet" href="../../../../_static/stylesheets/main.42d9060c.min.css">
      
        
        <link rel="stylesheet" href="../../../../_static/stylesheets/palette.52561aa6.min.css">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../../../../_static/./css/custom.css" />
    <script>__md_scope=new URL("../../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="green">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../index.html" title="swmm-pandas" class="md-header__button md-logo" aria-label="swmm-pandas" data-md-component="logo">
      <img src="../../../../_static/favicon.png" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            swmm-pandas
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              swmm.pandas.output.output
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="light-green" data-md-color-accent="deep-orange"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/karosc/swmm-python/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    swmm-pandas
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../index.html" title="swmm-pandas" class="md-nav__button md-logo" aria-label="swmm-pandas" data-md-component="logo">
      <img src="../../../../_static/favicon.png" alt="logo">
    </a>
    swmm-pandas
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/karosc/swmm-python/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    swmm-pandas
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../installation.html" class="md-nav__link">
        <span class="md-ellipsis">Installation</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../usage.html" class="md-nav__link">
        <span class="md-ellipsis">Usage</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../reference/index.html" class="md-nav__link">
        <span class="md-ellipsis">API Reference</span>
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset" role="main">
                
<a href="https://github.com/karosc/swmm-python/blob/main/docs/_modules/swmm/pandas/output/output.rst" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



  <h1>Source code for swmm.pandas.output.output</h1><div class="highlight"><pre>
<span></span><code><span class="kn">from</span> <span class="nn">aenum</span> <span class="kn">import</span> <span class="n">EnumMeta</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timedelta</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">NoReturn</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">aenum</span> <span class="kn">import</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">extend_enum</span>
<span class="kn">from</span> <span class="nn">julian</span> <span class="kn">import</span> <span class="n">from_jd</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">asarray</span><span class="p">,</span> <span class="n">atleast_1d</span><span class="p">,</span> <span class="n">atleast_2d</span><span class="p">,</span> <span class="n">concatenate</span><span class="p">,</span> <span class="n">datetime64</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">integer</span> <span class="k">as</span> <span class="n">npint</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">ndarray</span><span class="p">,</span> <span class="n">stack</span><span class="p">,</span> <span class="n">tile</span><span class="p">,</span> <span class="n">vstack</span>
<span class="kn">from</span> <span class="nn">pandas.core.api</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">DatetimeIndex</span><span class="p">,</span>
    <span class="n">Index</span><span class="p">,</span>
    <span class="n">MultiIndex</span><span class="p">,</span>
    <span class="n">Timestamp</span><span class="p">,</span>
    <span class="n">to_datetime</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">swmm.toolkit</span> <span class="kn">import</span> <span class="n">output</span><span class="p">,</span> <span class="n">shared_enum</span>

<span class="kn">from</span> <span class="nn">swmm.pandas.output.structure</span> <span class="kn">import</span> <span class="n">Structure</span>
<span class="kn">from</span> <span class="nn">swmm.pandas.output.tools</span> <span class="kn">import</span> <span class="n">arrayish</span><span class="p">,</span> <span class="n">_enum_get</span><span class="p">,</span> <span class="n">_enum_keys</span>


<span class="k">def</span> <span class="nf">output_open_handler</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Checks if output file is open before running function.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    func: function</span>
<span class="sd">        method of Output class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@wraps</span><span class="p">(</span><span class="n">func</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">inner_function</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_open</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">inner_function</span>


<div class="viewcode-block" id="Output"><a class="viewcode-back" href="../../../../reference/output/index.html#swmm.pandas.Output">[docs]</a><span class="k">class</span> <span class="nc">Output</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">binfile</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Base class for a SWMM binary output file.</span>

<span class="sd">        The output object provides several options to process timeseries within binary output file.</span>

<span class="sd">        Output files should be closed after use prevent memory leaks. Close them explicitly with</span>
<span class="sd">        the `_close()` method or deleting the object using `del`, or use it with a context manager.</span>

<span class="sd">        .. code-block:: python</span>

<span class="sd">            # Using a the _close method</span>
<span class="sd">            &gt;&gt;&gt; from swmm.pandas import Output</span>
<span class="sd">            &gt;&gt;&gt; out = Output(&#39;tests/Model.out&#39;)</span>
<span class="sd">            &gt;&gt;&gt; print(out.project_size)</span>
<span class="sd">            [3, 9, 8, 1, 3]</span>
<span class="sd">            &gt;&gt;&gt; out._close() # can also use `del out`</span>
<span class="sd">            &gt;&gt;&gt;</span>
<span class="sd">            # Using a context manager</span>
<span class="sd">            &gt;&gt;&gt; with Output(&#39;tests/Model.out&#39;) as out:</span>
<span class="sd">            ...     print(out.pollutants)</span>
<span class="sd">            (&#39;groundwater&#39;, &#39;pol_rainfall&#39;, &#39;sewage&#39;)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        binfile: str</span>
<span class="sd">            model binary file path</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_period</span><span class="p">:</span> <span class="nb">int</span>
        <span class="sd">&quot;&quot;&quot;number of reporting time steps in the &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_report</span><span class="p">:</span> <span class="nb">int</span>
        <span class="sd">&quot;&quot;&quot;out file reporting time step in seconds&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_start</span><span class="p">:</span> <span class="n">datetime</span>
        <span class="sd">&quot;&quot;&quot;start datetime of the output file records&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_end</span><span class="p">:</span> <span class="n">datetime</span>
        <span class="sd">&quot;&quot;&quot;end datetime of the output file records&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_timeIndex</span><span class="p">:</span> <span class="n">DatetimeIndex</span>
        <span class="sd">&quot;&quot;&quot;DatetimeIndex to use for output timeseries&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_project_size</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span>
        <span class="sd">&quot;&quot;&quot;Array of element count values [nSubcatchments, nNodes, nLinks, nSystems(1), nPollutants]&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_subcatchments</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
        <span class="sd">&quot;&quot;&quot;Tuple of subcatchment names in output file&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_links</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
        <span class="sd">&quot;&quot;&quot;Tuple of link names in output file&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_pollutants</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
        <span class="sd">&quot;&quot;&quot;Tuple of pollutant names in output file&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_binfile</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">binfile</span>
        <span class="sd">&quot;&quot;&quot;path to binary output file&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_delete_handle</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="sd">&quot;&quot;&quot;Indicates if output file was closed correctly&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_loaded</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="sd">&quot;&quot;&quot;Indicates if output file was loaded correctly&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subcatch_attributes</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span>
            <span class="s2">&quot;subcatch_attributes&quot;</span><span class="p">,</span>
            <span class="nb">list</span><span class="p">(</span><span class="n">shared_enum</span><span class="o">.</span><span class="n">SubcatchAttribute</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="sd">&quot;&quot;&quot;Subcatchment attribute enumeration: By default has</span>

<span class="sd">        &#39;rainfall&#39;,</span>
<span class="sd">        &#39;snow_depth&#39;,</span>
<span class="sd">        &#39;evap_loss&#39;,</span>
<span class="sd">        &#39;infil_loss&#39;,</span>
<span class="sd">        &#39;runoff_rate&#39;,</span>
<span class="sd">        &#39;gw_outflow_rate&#39;,</span>
<span class="sd">        &#39;gw_table_elev&#39;,</span>
<span class="sd">        &#39;soil_moisture&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># need copies of enumes to extend them for pollutants</span>
        <span class="c1"># basically recreate enums using the keys from shared_enum</span>
        <span class="c1"># but drop POLLUT_CONC_0 for each</span>
        <span class="c1">#</span>
        <span class="c1"># I looked into using swmm.toolkit.output_metadata for this but it</span>
        <span class="c1"># extends global enums, which could break having multiple</span>
        <span class="c1"># output objects opened in the same python session if they</span>
        <span class="c1"># have different pollutant names</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">node_attributes</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span>
            <span class="s2">&quot;node_attributes&quot;</span><span class="p">,</span>
            <span class="nb">list</span><span class="p">(</span><span class="n">shared_enum</span><span class="o">.</span><span class="n">NodeAttribute</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="sd">&quot;&quot;&quot;Node attribute enumeration: By default has</span>

<span class="sd">        &#39;invert_depth&#39;,</span>
<span class="sd">        &#39;hydraulic_head&#39;,</span>
<span class="sd">        &#39;ponded_volume&#39;,</span>
<span class="sd">        &#39;lateral_inflow&#39;,</span>
<span class="sd">        &#39;total_inflow&#39;,</span>
<span class="sd">        &#39;flooding_losses&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">link_attributes</span> <span class="o">=</span> <span class="n">Enum</span><span class="p">(</span>
            <span class="s2">&quot;link_attributes&quot;</span><span class="p">,</span>
            <span class="nb">list</span><span class="p">(</span><span class="n">shared_enum</span><span class="o">.</span><span class="n">LinkAttribute</span><span class="o">.</span><span class="n">__members__</span><span class="o">.</span><span class="n">keys</span><span class="p">())[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">start</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="sd">&quot;&quot;&quot;Link attribute enumeration: By default has</span>

<span class="sd">        &#39;flow_rate&#39;,</span>
<span class="sd">        &#39;flow_depth&#39;,</span>
<span class="sd">        &#39;flow_velocity&#39;,</span>
<span class="sd">        &#39;flow_volume&#39;,</span>
<span class="sd">        &#39;capacity&#39;,</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">system_attributes</span> <span class="o">=</span> <span class="n">shared_enum</span><span class="o">.</span><span class="n">SystemAttribute</span>
        <span class="sd">&quot;&quot;&quot;System attribute enumeration: By default has</span>

<span class="sd">        &#39;air_temp&#39;,</span>
<span class="sd">        &#39;rainfall&#39;,</span>
<span class="sd">        &#39;snow_depth&#39;,</span>
<span class="sd">        &#39;evap_infil_loss&#39;,</span>
<span class="sd">        &#39;runoff_flow&#39;,</span>
<span class="sd">        &#39;dry_weather_inflow&#39;,</span>
<span class="sd">        &#39;gw_inflow&#39;,</span>
<span class="sd">        &#39;rdii_inflow&#39;,</span>
<span class="sd">        &#39;direct_inflow&#39;,</span>
<span class="sd">        &#39;total_lateral_inflow&#39;,</span>
<span class="sd">        &#39;flood_losses&#39;,</span>
<span class="sd">        &#39;outfall_flows&#39;,</span>
<span class="sd">        &#39;volume_stored&#39;,</span>
<span class="sd">        &#39;evap_rate&#39;,</span>
<span class="sd">        &#39;ptnl_evap_rate&#39;</span>

<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_elementIndex</span><span class="p">(</span>
        <span class="n">elementID</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">indexSquence</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">elementType</span><span class="p">:</span> <span class="nb">str</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Validate the index of a model element passed to Output methods. Used to</span>
<span class="sd">        convert model element names to their index in the out file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        elementID: str, int</span>
<span class="sd">            The name or index of the model element listed in the index_dict dict.</span>
<span class="sd">        indexSquence: one of more string</span>
<span class="sd">            The ordered sequence against which to validate the index</span>
<span class="sd">            (one of self.nodes, self.links, self.subcatchments).</span>
<span class="sd">        elementType: str</span>
<span class="sd">            The type of model element (e.g. node, link, etc.)</span>
<span class="sd">            Only used to print the exception if an attribute cannot be found.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The integer index of the requested element.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        OutputException</span>
<span class="sd">            Exception if element cannot be found in indexSequence.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">elementID</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">npint</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">elementID</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">indexSquence</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">elementID</span><span class="p">)</span>

        <span class="c1"># since this class can pull multiple attributes and elements in one function</span>
        <span class="c1"># call it is probably better to do some pre-validation of input arguments</span>
        <span class="c1"># before starting a potentially lengthy data pull</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">elementType</span><span class="si">}</span><span class="s2"> ID: </span><span class="si">{</span><span class="n">elementID</span><span class="si">}</span><span class="s2"> does not exist in model output.&quot;</span>
            <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_validateAttribute</span><span class="p">(</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">validAttributes</span><span class="p">:</span> <span class="n">Enum</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">list</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function to validate attribute arguments of element_series, element_attribute,</span>
<span class="sd">        and element_result functions.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attribute: Union[int, str, Sequence[Union[int, str]], None]</span>
<span class="sd">            The attribute to validate against validAttributes.</span>
<span class="sd">        validAttributes: dict</span>
<span class="sd">            THe dict of attributes against which to validate attribute.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[list, list]</span>
<span class="sd">            Two arrays, one of attribute names and one of attribute indicies.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># this kind of logic was needed in the series and results functions.</span>
        <span class="c1"># not sure if this is the best way, but it felt a bit DRYer to</span>
        <span class="c1"># put it into a funciton</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">),</span> <span class="n">EnumMeta</span><span class="p">)):</span>
            <span class="n">attributeArray</span> <span class="o">=</span> <span class="n">_enum_keys</span><span class="p">(</span><span class="n">validAttributes</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attribute</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">):</span>
            <span class="n">attributeArray</span> <span class="o">=</span> <span class="n">attribute</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">attributeArray</span> <span class="o">=</span> <span class="p">[</span><span class="n">attribute</span><span class="p">]</span>

        <span class="c1"># allow mixed input of attributes</span>
        <span class="c1"># accept string names, integers, or enums values in the same list</span>
        <span class="n">attributeIndexArray</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">attrib</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">attributeArray</span><span class="p">):</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attrib</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
                <span class="n">attributeArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">attrib</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                <span class="n">attributeIndexArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attrib</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attrib</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">npint</span><span class="p">)):</span>
                <span class="c1"># will raise index error if not in range</span>
                <span class="n">attribName</span> <span class="o">=</span> <span class="n">_enum_keys</span><span class="p">(</span><span class="n">validAttributes</span><span class="p">)[</span><span class="n">attrib</span><span class="p">]</span>
                <span class="n">attributeArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">attribName</span>
                <span class="n">attributeIndexArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">_enum_get</span><span class="p">(</span><span class="n">validAttributes</span><span class="p">,</span> <span class="n">attribName</span><span class="p">))</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attrib</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">index</span> <span class="o">=</span> <span class="n">_enum_get</span><span class="p">(</span><span class="n">validAttributes</span><span class="p">,</span> <span class="n">attrib</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Attribute </span><span class="si">{</span><span class="n">attrib</span><span class="si">}</span><span class="s2"> not in valid attribute list: </span><span class="si">{</span><span class="n">_enum_keys</span><span class="p">(</span><span class="n">validAttributes</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="n">attributeIndexArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Input type: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">attrib</span><span class="p">)</span><span class="si">}</span><span class="s2"> not valid. Must be one of int, str, or Enum&quot;</span>
                <span class="p">)</span>

        <span class="c1"># attributeIndexArray = [validAttributes.get(atr, -1) for atr in attributeArray]</span>

        <span class="k">return</span> <span class="n">attributeArray</span><span class="p">,</span> <span class="n">attributeIndexArray</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_validateElement</span><span class="p">(</span>
        <span class="n">element</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">validElements</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function to validate element arguments of element_series, element_attribute,</span>
<span class="sd">        and element_result functions.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        element: Union[int, str, Sequence[Union[int, str]], None]</span>
<span class="sd">            The element name or index or None. If None, return all elements in</span>
<span class="sd">            validElements.</span>
<span class="sd">        validElements: Sequence[str]</span>
<span class="sd">            Tuple of elements against which to validate element.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[list, list]</span>
<span class="sd">            Two arrays, one of element names and one of element indicies.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># this kind of logic was needed in the series and results functions</span>
        <span class="c1"># not sure if this is the best way, but it felt a bit DRYer to</span>
        <span class="c1"># put it into a funciton</span>

        <span class="k">if</span> <span class="n">element</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">elementArray</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">validElements</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">):</span>
            <span class="n">elementArray</span> <span class="o">=</span> <span class="n">element</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># ignore typing since types of this output list</span>
            <span class="c1"># are reconciled in the next loop. mypy was complaining.</span>
            <span class="n">elementArray</span> <span class="o">=</span> <span class="p">[</span><span class="n">element</span><span class="p">]</span>  <span class="c1"># type: ignore</span>

        <span class="n">elementIndexArray</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># allow mixed input of elements. string names can be mixed</span>
        <span class="c1"># with integer indicies in the same input list</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elem</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">elementArray</span><span class="p">):</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">npint</span><span class="p">)):</span>
                <span class="c1"># will raise index error if not in range</span>
                <span class="n">elemName</span> <span class="o">=</span> <span class="n">validElements</span><span class="p">[</span><span class="n">elem</span><span class="p">]</span>
                <span class="n">elementArray</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">elemName</span>
                <span class="n">elementIndexArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">elementIndexArray</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Output</span><span class="o">.</span><span class="n">_elementIndex</span><span class="p">(</span><span class="n">elem</span><span class="p">,</span> <span class="n">validElements</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Input type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span><span class="si">}</span><span class="s2"> not valid. Must be one of int, str&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">elementArray</span><span class="p">,</span> <span class="n">elementIndexArray</span>

    <span class="k">def</span> <span class="nf">_checkPollutantName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Check pollutant name against existing attribute dicts.</span>
<span class="sd">        Rename and and warn if existing attribute is duplicated.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name: str</span>
<span class="sd">            The name of pollutant.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            The validated name of pollutant.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">elems</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">_enum_keys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subcatch_attributes</span><span class="p">):</span>
            <span class="n">elems</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;subcatchment&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">_enum_keys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_attributes</span><span class="p">):</span>
            <span class="n">elems</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;node&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">_enum_keys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">link_attributes</span><span class="p">):</span>
            <span class="n">elems</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">_enum_keys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">system_attributes</span><span class="p">):</span>
            <span class="n">elems</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;system&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elems</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Pollutent </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> is a duplicate of existing </span><span class="si">{</span><span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">elems</span><span class="p">)</span><span class="si">}</span><span class="s2"> attribute, renaming to pol_</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;pol_</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">return</span> <span class="n">name</span>

    <span class="k">def</span> <span class="nf">_open</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Open a binary file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            True if binary file was opened successfully.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_binfile</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Output file at: &#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_binfile</span><span class="si">}</span><span class="s2">&#39; does not exist&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_loaded</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">output</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_binfile</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_start</span> <span class="o">=</span> <span class="n">from_jd</span><span class="p">(</span>
                <span class="n">output</span><span class="o">.</span><span class="n">get_start_date</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span> <span class="o">+</span> <span class="mf">2415018.5</span>
            <span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_report</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">get_times</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">shared_enum</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="n">REPORT_STEP</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_period</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">get_times</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">shared_enum</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="n">NUM_PERIODS</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_period</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_report</span><span class="p">)</span>

            <span class="c1"># load pollutants if not already loaded</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_pollutants&quot;</span><span class="p">):</span>
                <span class="c1"># load pollutant data if it has not before</span>
                <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_size</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_pollutants</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_checkPollutantName</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_objectName</span><span class="p">(</span><span class="n">shared_enum</span><span class="o">.</span><span class="n">ElementType</span><span class="o">.</span><span class="n">POLLUT</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
                <span class="p">)</span>

                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">nom</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_pollutants</span><span class="p">):</span>
                    <span class="c1"># extend enums to include pollutants</span>
                    <span class="n">extend_enum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subcatch_attributes</span><span class="p">,</span> <span class="n">nom</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="mi">8</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span>
                    <span class="n">extend_enum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_attributes</span><span class="p">,</span> <span class="n">nom</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="mi">6</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span>
                    <span class="n">extend_enum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">link_attributes</span><span class="p">,</span> <span class="n">nom</span><span class="o">.</span><span class="n">upper</span><span class="p">(),</span> <span class="mi">5</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">_close</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Close an opened binary file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        bool</span>
<span class="sd">            True if binary file was closed successfully.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_loaded</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_loaded</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_delete_handle</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">output</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="c1">###### outfile property getters ######</span>

    <span class="nd">@property</span>  <span class="c1"># type: ignore</span>
    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">report</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the reporting timestep in seconds.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The reporting timestep in seconds.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_report</span>

    <span class="nd">@property</span>  <span class="c1"># type: ignore</span>
    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the reporting start datetime.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        datetime</span>
<span class="sd">            The reporting start datetime.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start</span>

    <span class="nd">@property</span>  <span class="c1"># type: ignore</span>
    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">end</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the reporting end datetime.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        datetime</span>
<span class="sd">            The reporting end datetime.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_end</span>

    <span class="nd">@property</span>  <span class="c1"># type: ignore</span>
    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">period</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return the number of reporting timesteps in the binary output file.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The number of reporting timesteps.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_period</span>

    <span class="nd">@property</span>  <span class="c1"># type: ignore</span>
    <span class="k">def</span> <span class="nf">project_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of each model element type available in out binary output file</span>
<span class="sd">        in the following order:</span>

<span class="sd">        [subcatchment, node, link, system, pollutant]</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list</span>
<span class="sd">            A list of numbers of each model type.</span>

<span class="sd">            [nSubcatchments, nNodes, nLinks, nSystems(1), nPollutants]</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_project_size&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_load_project_size</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_project_size</span>

    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">_load_project_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Load model size into self._project_size&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_project_size</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="n">get_proj_size</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">pollutants</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a tuple of pollutants available in SWMM binary output file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">         Tuple[str]</span>
<span class="sd">           A tuple of pollutant names.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># chose not to write a pollutant loader method</span>
        <span class="c1"># because loading such is kind of imperative to the functionality</span>
        <span class="c1"># of other data getter methods, which don&#39;t necessarily</span>
        <span class="c1"># call pollutants method. Instead, pollutant loading logic is</span>
        <span class="c1"># thrown in the _open() method, and this method calls open if</span>
        <span class="c1"># pollutants are not available.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pollutants</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_open</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_pollutants</span>

    <span class="nd">@property</span>  <span class="c1"># type: ignore</span>
    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">_unit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return SWMM binary output file unit type from `swmm.toolkit.shared_enum.UnitSystem`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[int]</span>
<span class="sd">            Tuple of integers indicating system units, flow units, and units for each pollutant.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">get_units</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">))</span>  <span class="c1"># type: ignore</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">units</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return SWMM binary output file unit type from `swmm.toolkit.shared_enum.UnitSystem`.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[str]</span>
<span class="sd">            List of string names for system units, flow units, and units for each pollutant.</span>

<span class="sd">            Values returned are the names from swmm.toolkit.shared_enum:</span>
<span class="sd">                UnitSystem</span>
<span class="sd">                FlowUnits</span>
<span class="sd">                ConcUnits</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="n">shared_enum</span><span class="o">.</span><span class="n">UnitSystem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unit</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">shared_enum</span><span class="o">.</span><span class="n">FlowUnits</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unit</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
        <span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">shared_enum</span><span class="o">.</span><span class="n">ConcUnits</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unit</span><span class="p">[</span><span class="mi">2</span><span class="p">:]]</span>

    <span class="nd">@property</span>  <span class="c1"># type: ignore</span>
    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Return SWMM version used to generate SWMM binary output file results.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            Integer representation of SWMM version used to make output file.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">output</span><span class="o">.</span><span class="n">get_version</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">)</span>

    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">_objectName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">object_type</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Get object name from SWMM binary output file using object type and object index.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        object_type: int</span>
<span class="sd">            The object type from swmm.toolkit.shared_enum.ElementType.</span>
<span class="sd">        index: int</span>
<span class="sd">            The object index.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        str</span>
<span class="sd">            object name</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">output</span><span class="o">.</span><span class="n">get_elem_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">object_type</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>

    <span class="c1">##### timestep setters and getters #####</span>
    <span class="k">def</span> <span class="nf">_time2step</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dateTime</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
            <span class="kc">None</span><span class="p">,</span>
            <span class="nb">str</span><span class="p">,</span>
            <span class="nb">int</span><span class="p">,</span>
            <span class="n">datetime</span><span class="p">,</span>
            <span class="n">Timestamp</span><span class="p">,</span>
            <span class="n">datetime64</span><span class="p">,</span>
            <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">Timestamp</span><span class="p">,</span> <span class="n">datetime64</span><span class="p">]],</span>
        <span class="p">],</span>
        <span class="n">ifNone</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;nearest&quot;</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Convert datetime value to SWMM timestep index. By deafult, this returns the nearest timestep to</span>
<span class="sd">        to the requested date, so it will always return a time index available in the binary output file.</span>


<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dateTime: datetime-like or string or sequence of such</span>
<span class="sd">            datetime to convert. Must be a datetime-like object or convertable</span>
<span class="sd">            with `pd.to_datetime`.</span>

<span class="sd">        ifNone: int</span>
<span class="sd">            The value to return if dateTime is None, defaults to 0.</span>

<span class="sd">        method: str</span>
<span class="sd">            The method name to pass to pandas `get_indexer`_, default to &quot;nearest.</span>

<span class="sd">            .. _get_indexer: https://pandas.pydata.org/docs/reference/api/pandas.Index.get_indexer.html</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[int, np.ndarray]</span>
<span class="sd">            SWMM model time step or array of time steps</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">dateTime</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">ifNone</span><span class="p">]</span>

        <span class="n">dt</span> <span class="o">=</span> <span class="n">asarray</span><span class="p">(</span><span class="n">dateTime</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

        <span class="c1"># if passing swmm time step, no indexing necessary</span>
        <span class="k">if</span> <span class="n">dt</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">in</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">dt</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="c1"># ensure datetime value</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">to_datetime</span><span class="p">(</span><span class="n">dateTime</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span><span class="o">.</span><span class="n">get_indexer</span><span class="p">(</span><span class="n">dt</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">timeIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">DatetimeIndex</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Returns DatetimeIndex of reporting timeseries in binary output file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pd.DatetimeIndex</span>
<span class="sd">            A pandas `DatetimeIndex`_ for each reporting timestep.</span>

<span class="sd">            .. _DatetimeIndex: https://pandas.pydata.org/docs/reference/api/pandas.DatetimeIndex.html?highlight=datetimeindex#pandas.DatetimeIndex</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_timeIndex&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_load_timeIndex</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timeIndex</span>

    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">_load_timeIndex</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Load model reporting times into self._times&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_timeIndex</span> <span class="o">=</span> <span class="n">DatetimeIndex</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_start</span> <span class="o">+</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_report</span><span class="p">)</span> <span class="o">*</span> <span class="n">step</span>
                <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_period</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="p">)</span>

    <span class="c1">##### model element setters and getters #####</span>
    <span class="k">def</span> <span class="nf">_subcatchmentIndex</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">subcatchment</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the swmm index for subcatchment.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        subcatchment: Union[str, int, Sequence[Union[str, int]]]</span>
<span class="sd">            The name(s) of subcatchment(s).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[List[int], int]</span>
<span class="sd">           The SWMM index(s) of subcatchment(s).</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subcatchment</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">))):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elementIndex</span><span class="p">(</span><span class="n">subcatchment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcatchments</span><span class="p">,</span> <span class="s2">&quot;subcatchment&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">subcatchment</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_elementIndex</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcatchments</span><span class="p">,</span> <span class="s2">&quot;subcatchment&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">sub</span> <span class="ow">in</span> <span class="n">subcatchment</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid type for _subcatchmentIndex argument&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">subcatchments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a tuple of subcatchments available in SWMM output binary file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[str]</span>
<span class="sd">            A tuple of model subcatchment names.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_subcatchments&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_load_subcatchments</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subcatchments</span>

    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">_load_subcatchments</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Load model size into self._project_size&quot;&quot;&quot;</span>
        <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_subcatchments</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objectName</span><span class="p">(</span><span class="n">shared_enum</span><span class="o">.</span><span class="n">ElementType</span><span class="o">.</span><span class="n">SUBCATCH</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_nodeIndex</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the swmm index for node.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        node: Union[str, int, Sequence[Union[str, int]]]</span>
<span class="sd">            The name(s) of node(s)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[List[int], int]</span>
<span class="sd">            The SWMM index(s) of node(s).</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">))):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elementIndex</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="s2">&quot;node&quot;</span><span class="p">)</span>

        <span class="c1"># elif here because mypy issues</span>
        <span class="k">elif</span> <span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_elementIndex</span><span class="p">(</span><span class="n">nd</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="s2">&quot;node&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">nd</span> <span class="ow">in</span> <span class="n">node</span><span class="p">]</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid type for self._nodeIndex argument&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a tuple of nodes available in SWMM binary output file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[str]</span>
<span class="sd">            A tuple of model node names.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_nodes&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_load_nodes</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span>

    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">_load_nodes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Load model nodes into self._nodes&quot;&quot;&quot;</span>
        <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_nodes</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objectName</span><span class="p">(</span><span class="n">shared_enum</span><span class="o">.</span><span class="n">ElementType</span><span class="o">.</span><span class="n">NODE</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_linkIndex</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">link</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get the swmm index for link.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        link: Union[str, int, Sequence[Union[str, int]]]</span>
<span class="sd">            The name(s) of link(s)</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[List[int], int]</span>
<span class="sd">            SWMM index(s) of link(s).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">))):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_elementIndex</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="p">,</span> <span class="s2">&quot;link&quot;</span><span class="p">)</span>

        <span class="c1"># elif here because mypy issues</span>
        <span class="k">elif</span> <span class="n">link</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_elementIndex</span><span class="p">(</span><span class="n">lnk</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="p">,</span> <span class="s2">&quot;link&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">lnk</span> <span class="ow">in</span> <span class="n">link</span><span class="p">]</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Invalid type for self._linkIndex argument&quot;</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">links</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Return a tuple of links available in SWMM binary output file.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Tuple[str]</span>
<span class="sd">            A tuple of model link names.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_links&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_load_links</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_links</span>

    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">_load_links</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Load model links into self._links&quot;&quot;&quot;</span>
        <span class="n">total</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_size</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_links</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_objectName</span><span class="p">(</span><span class="n">shared_enum</span><span class="o">.</span><span class="n">ElementType</span><span class="o">.</span><span class="n">LINK</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="c1">####### series getters #######</span>

    <span class="k">def</span> <span class="nf">_model_series</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">elementIndexArray</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span>
        <span class="n">attributeIndexArray</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Enum</span><span class="p">],</span>
        <span class="n">startIndex</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">endIndex</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">getterFunc</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ndarray</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Base series getter for any attribute. The function consilidates the logic</span>
<span class="sd">        necessary to build long or wide timeseries dataframes for each type of swmm</span>
<span class="sd">        model element.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        elementIndexArray: List[int]</span>
<span class="sd">            Array of SWMM model element indicies</span>
<span class="sd">        attributeIndexArray: List[enum]</span>
<span class="sd">            Array of attribute Enums to pull for each element</span>
<span class="sd">        startIndex: int</span>
<span class="sd">            SWMM simulation time index to start timeseries</span>
<span class="sd">        endIndex: int</span>
<span class="sd">            SWMM simulation time index to end timeseries</span>
<span class="sd">        columns: Optional[str]</span>
<span class="sd">             Decide whether or not to break out elements or attributes as columns. May be one of:</span>

<span class="sd">             None: Return long-form data with one column for each data point</span>

<span class="sd">            &#39;elem&#39;: Return data with a column for each element. If more than one attribute are given, attribute names are added to the index.</span>

<span class="sd">            &#39;attr&#39;: Return data with a column for each attribute. If more than one element are given, element names are added to the index.</span>

<span class="sd">        getterFunc: Callable</span>
<span class="sd">            The swmm.toolkit series getter function. Should be one of:</span>

<span class="sd">             swmm.toolkit.output.get_subcatch_series</span>
<span class="sd">             swmm.toolkit.output.get_node_series</span>
<span class="sd">             swmm.toolkit.output.get_link_series</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        np.ndarray</span>
<span class="sd">            array of SWMM timeseries results</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            Value error if columns is not one of &quot;elem&quot;, &quot;attr&quot;, or None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">columns</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;elem&quot;</span><span class="p">,</span> <span class="s2">&quot;attr&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;columns must be one of &#39;elem&#39;,&#39;attr&#39;, or None. </span><span class="si">{</span><span class="n">columns</span><span class="si">}</span><span class="s2"> was given&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">concatenate</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">getterFunc</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">elemIdx</span><span class="p">,</span> <span class="n">Attr</span><span class="p">,</span> <span class="n">startIndex</span><span class="p">,</span> <span class="n">endIndex</span>
                            <span class="p">)</span>
                            <span class="k">for</span> <span class="n">Attr</span> <span class="ow">in</span> <span class="n">attributeIndexArray</span>
                        <span class="p">],</span>
                        <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">elemIdx</span> <span class="ow">in</span> <span class="n">elementIndexArray</span>
                <span class="p">],</span>
                <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="n">columns</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;attr&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">stack</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">getterFunc</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">elemIdx</span><span class="p">,</span> <span class="n">Attr</span><span class="p">,</span> <span class="n">startIndex</span><span class="p">,</span> <span class="n">endIndex</span>
                            <span class="p">)</span>
                            <span class="k">for</span> <span class="n">Attr</span> <span class="ow">in</span> <span class="n">attributeIndexArray</span>
                        <span class="p">],</span>
                        <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">elemIdx</span> <span class="ow">in</span> <span class="n">elementIndexArray</span>
                <span class="p">],</span>
                <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="n">columns</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;elem&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">concatenate</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">stack</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="n">getterFunc</span><span class="p">(</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">elemIdx</span><span class="p">,</span> <span class="n">Attr</span><span class="p">,</span> <span class="n">startIndex</span><span class="p">,</span> <span class="n">endIndex</span>
                            <span class="p">)</span>
                            <span class="k">for</span> <span class="n">elemIdx</span> <span class="ow">in</span> <span class="n">elementIndexArray</span>
                        <span class="p">],</span>
                        <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">Attr</span> <span class="ow">in</span> <span class="n">attributeIndexArray</span>
                <span class="p">],</span>
                <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_model_series_index</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">elementArray</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">attributeArray</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">startIndex</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">endIndex</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Base dataframe index getter for model timeseries. The function consilidates the logic</span>
<span class="sd">        necessary to build a data frame index for long or wide dataframes built with time series</span>
<span class="sd">        getters.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        elementArray: List[str]</span>
<span class="sd">            Array of SWMM model element names</span>
<span class="sd">        attributeArray: List[str]</span>
<span class="sd">            Array of attribute names pulled for each element</span>
<span class="sd">        startIndex: int</span>
<span class="sd">            SWMM simulation time index to start timeseries</span>
<span class="sd">        endIndex: int</span>
<span class="sd">            SWMM simulation time index to end timeseries</span>
<span class="sd">        columns: Optional[str]</span>
<span class="sd">             Decide whether or not to break out elements or attributes as columns. May be one of:</span>

<span class="sd">             None: Return long-form data with one column for each data point</span>

<span class="sd">            &#39;elem&#39;: Return data with a column for each element. If more than one attribute are given, attribute names are added to the index.</span>

<span class="sd">            &#39;attr&#39;: Return data with a column for each attribute. If more than one element are given, element names are added to the index.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        (pd.MultiIndex, Union[list,np.ndarray])</span>
<span class="sd">            A pandas MultiIndex for the row indicies and an iterable of column names</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            Value error if columns is not one of &quot;elem&quot;, &quot;attr&quot;, or None</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">columns</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;elem&quot;</span><span class="p">,</span> <span class="s2">&quot;attr&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;columns must be one of &#39;elem&#39;,&#39;attr&#39;, or None. </span><span class="si">{</span><span class="n">columns</span><span class="si">}</span><span class="s2"> was given&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">columns</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dtIndex</span> <span class="o">=</span> <span class="n">tile</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">[</span><span class="n">startIndex</span><span class="p">:</span><span class="n">endIndex</span><span class="p">],</span>
                <span class="nb">len</span><span class="p">(</span><span class="n">elementArray</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">attributeArray</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">indexArrays</span> <span class="o">=</span> <span class="p">[</span><span class="n">dtIndex</span><span class="p">]</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">]</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elementArray</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">indexArrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">asarray</span><span class="p">(</span><span class="n">elementArray</span><span class="p">)</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">endIndex</span> <span class="o">-</span> <span class="n">startIndex</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">attributeArray</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;element&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attributeArray</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">indexArrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">tile</span><span class="p">(</span><span class="n">asarray</span><span class="p">(</span><span class="n">attributeArray</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">elementArray</span><span class="p">))</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span>
                        <span class="n">endIndex</span> <span class="o">-</span> <span class="n">startIndex</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;attribute&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">columns</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;attr&quot;</span><span class="p">:</span>
            <span class="n">dtIndex</span> <span class="o">=</span> <span class="n">tile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">[</span><span class="n">startIndex</span><span class="p">:</span><span class="n">endIndex</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="n">elementArray</span><span class="p">))</span>
            <span class="n">indexArrays</span> <span class="o">=</span> <span class="p">[</span><span class="n">dtIndex</span><span class="p">]</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">]</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">attributeArray</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">elementArray</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">indexArrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asarray</span><span class="p">(</span><span class="n">elementArray</span><span class="p">)</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">endIndex</span> <span class="o">-</span> <span class="n">startIndex</span><span class="p">))</span>
                <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;element&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">columns</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;elem&quot;</span><span class="p">:</span>
            <span class="n">dtIndex</span> <span class="o">=</span> <span class="n">tile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">[</span><span class="n">startIndex</span><span class="p">:</span><span class="n">endIndex</span><span class="p">],</span> <span class="nb">len</span><span class="p">(</span><span class="n">attributeArray</span><span class="p">))</span>
            <span class="n">indexArrays</span> <span class="o">=</span> <span class="p">[</span><span class="n">dtIndex</span><span class="p">]</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">]</span>
            <span class="n">cols</span> <span class="o">=</span> <span class="n">elementArray</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">attributeArray</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">indexArrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="n">asarray</span><span class="p">(</span><span class="n">attributeArray</span><span class="p">)</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">endIndex</span> <span class="o">-</span> <span class="n">startIndex</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;attribute&quot;</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">(</span>
                <span class="n">indexArrays</span><span class="p">,</span>
                <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">indexArrays</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span>
            <span class="k">else</span> <span class="n">Index</span><span class="p">(</span><span class="n">indexArrays</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">names</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">index</span><span class="p">,</span> <span class="n">cols</span>

<div class="viewcode-block" id="Output.subcatch_series"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.subcatch_series.html#swmm.pandas.Output.subcatch_series">[docs]</a>    <span class="k">def</span> <span class="nf">subcatch_series</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subcatchment</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;rainfall&quot;</span><span class="p">,</span>
            <span class="s2">&quot;runoff_rate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;gw_outflow_rate&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">start</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;attr&quot;</span><span class="p">,</span>
        <span class="n">asframe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get one or more time series for one or more subcatchment attributes.</span>
<span class="sd">        Specify series start index and end index to get desired time range.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        subcatchment: Union[int, str, Sequence[Union[int, str]], None]</span>
<span class="sd">            The subcatchment index or name.</span>

<span class="sd">        attribute: Union[int, str, Enum, Sequence[Union[int, str, Enum]], None],</span>
<span class="sd">            The attribute index or name.</span>

<span class="sd">            On of:</span>

<span class="sd">            **rainfall, snow_depth, evap_loss, infil_loss, runoff_rate, gw_outflow_rate,</span>
<span class="sd">            gw_table_elev, soil_moisture**.</span>


<span class="sd">            Defaults to: `(&#39;rainfall&#39;, &#39;runoff_rate&#39;, &#39;gw_outflow_rate&#39;).`</span>


<span class="sd">            Can also input the integer index of the attribute you would like to</span>
<span class="sd">            pull or the actual enum from Output.subcatch_attributes.</span>

<span class="sd">            Setting to None indicates all attributes.</span>

<span class="sd">        start: Union[str,int, datetime, None], optional</span>
<span class="sd">            The start datetime or index of from which to return series, defaults to None.</span>

<span class="sd">            Setting to None indicates simulation start.</span>

<span class="sd">        end: Union[str,int, datetime, None], optional</span>
<span class="sd">            The end datetime or index of from which to return series, defaults to None.</span>

<span class="sd">            Setting to None indicates simulation end.</span>

<span class="sd">        columns: Optional[str], optional</span>
<span class="sd">            Decide whether or not to break out elements or attributes as columns. May be one of:</span>

<span class="sd">            None: Return long-form data with one column for each data point</span>

<span class="sd">            &#39;elem&#39;: Return data with a column for each element. If more than one attribute are given, attribute names are added to the index.</span>

<span class="sd">            &#39;attr&#39;: Return data with a column for each attribute. If more than one element are given, element names are added to the index.</span>

<span class="sd">            defaults to &#39;attr&#39;.</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame,np.ndarray]</span>
<span class="sd">            A DataFrame or ndarray of attribute values in each column for requested</span>
<span class="sd">            date range and subcatchments.</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>

<span class="sd">        Pull single time series for a single subcatchment</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.subcatch_series(&#39;SUB1&#39;, &#39;runoff_rate&#39;)</span>
<span class="sd">                             runoff_rate</span>
<span class="sd">        datetime</span>
<span class="sd">        1900-01-01 00:05:00     0.000000</span>
<span class="sd">        1900-01-01 00:10:00     0.000000</span>
<span class="sd">        1900-01-01 00:15:00     0.000000</span>
<span class="sd">        1900-01-01 00:20:00     0.000000</span>
<span class="sd">        1900-01-01 00:25:00     0.000000</span>
<span class="sd">        ...                          ...</span>
<span class="sd">        1900-01-01 23:40:00     0.025057</span>
<span class="sd">        1900-01-01 23:45:00     0.025057</span>
<span class="sd">        1900-01-01 23:50:00     0.025057</span>
<span class="sd">        1900-01-01 23:55:00     0.025057</span>
<span class="sd">        1900-01-02 00:00:00     0.025057</span>
<span class="sd">        [288 rows x 1 columns]</span>

<span class="sd">        Pull a wide-form dataframe for all parameters for a catchment</span>

<span class="sd">        &gt;&gt;&gt; out.subcatch_series(&#39;SUB1&#39;, out.subcatch_attributes)</span>
<span class="sd">                            rainfall  snow_depth  evap_loss  infil_loss  ...  soil_moisture  groundwater  pol_rainfall  sewage</span>
<span class="sd">        datetime                                                          ...</span>
<span class="sd">        1900-01-01 00:05:00   0.03000         0.0        0.0    0.020820  ...       0.276035          0.0           0.0     0.0</span>
<span class="sd">        1900-01-01 00:10:00   0.03000         0.0        0.0    0.020952  ...       0.276053          0.0           0.0     0.0</span>
<span class="sd">        1900-01-01 00:15:00   0.03000         0.0        0.0    0.021107  ...       0.276071          0.0           0.0     0.0</span>
<span class="sd">        1900-01-01 00:20:00   0.03000         0.0        0.0    0.021260  ...       0.276089          0.0           0.0     0.0</span>
<span class="sd">        1900-01-01 00:25:00   0.03000         0.0        0.0    0.021397  ...       0.276107          0.0           0.0     0.0</span>
<span class="sd">        ...                       ...         ...        ...         ...  ...            ...          ...           ...     ...</span>
<span class="sd">        1900-01-01 23:40:00   0.03224         0.0        0.0    0.027270  ...       0.280026          0.0         100.0     0.0</span>
<span class="sd">        1900-01-01 23:45:00   0.03224         0.0        0.0    0.027270  ...       0.280026          0.0         100.0     0.0</span>
<span class="sd">        1900-01-01 23:50:00   0.03224         0.0        0.0    0.027270  ...       0.280026          0.0         100.0     0.0</span>
<span class="sd">        1900-01-01 23:55:00   0.03224         0.0        0.0    0.027270  ...       0.280026          0.0         100.0     0.0</span>
<span class="sd">        1900-01-02 00:00:00   0.00000         0.0        0.0    0.027270  ...       0.280026          0.0         100.0     0.0</span>
<span class="sd">        [288 rows x 11 columns]</span>

<span class="sd">        Pull a long-form dataframe of all catchments and attributes</span>

<span class="sd">        &gt;&gt;&gt; out.subcatch_series(out.subcatchments, out.subcatch_attributes, columns=None)</span>
<span class="sd">                                               result</span>
<span class="sd">        datetime            element attribute</span>
<span class="sd">        1900-01-01 00:05:00 SUB1    rainfall     0.03</span>
<span class="sd">        1900-01-01 00:10:00 SUB1    rainfall     0.03</span>
<span class="sd">        1900-01-01 00:15:00 SUB1    rainfall     0.03</span>
<span class="sd">        1900-01-01 00:20:00 SUB1    rainfall     0.03</span>
<span class="sd">        1900-01-01 00:25:00 SUB1    rainfall     0.03</span>
<span class="sd">        ...                                       ...</span>
<span class="sd">        1900-01-01 23:40:00 SUB3    sewage       0.00</span>
<span class="sd">        1900-01-01 23:45:00 SUB3    sewage       0.00</span>
<span class="sd">        1900-01-01 23:50:00 SUB3    sewage       0.00</span>
<span class="sd">        1900-01-01 23:55:00 SUB3    sewage       0.00</span>
<span class="sd">        1900-01-02 00:00:00 SUB3    sewage       0.00</span>
<span class="sd">        [9504 rows x 1 columns]</span>

<span class="sd">        Pull two parameters for one subcatchment and plot the results</span>

<span class="sd">        .. plot::</span>

<span class="sd">           import matplotlib.pyplot as plt</span>
<span class="sd">           from matplotlib.dates import DateFormatter</span>
<span class="sd">           from swmm.pandas import Output,test_out_path</span>

<span class="sd">           # read output file in Output object</span>
<span class="sd">           out = Output(test_out_path)</span>

<span class="sd">           # pull rainfall and runoff_rate timeseries and plot them</span>
<span class="sd">           ax = out.subcatch_series(&#39;SUB1&#39;, [&#39;rainfall&#39;, &#39;runoff_rate&#39;]).plot(figsize=(8,4))</span>
<span class="sd">           plt.title(&quot;SUB1 Params&quot;)</span>
<span class="sd">           plt.tight_layout()</span>
<span class="sd">           plt.show()</span>

<span class="sd">        Pull the one parameter for all subcatchments</span>

<span class="sd">        .. plot::</span>

<span class="sd">           import matplotlib.pyplot as plt</span>
<span class="sd">           from matplotlib.dates import DateFormatter</span>
<span class="sd">           from swmm.pandas import Output,test_out_path</span>

<span class="sd">           # read output file in Output object</span>
<span class="sd">           out = Output(test_out_path)</span>

<span class="sd">           # pull runoff_rate timeseries for all cathments and plot them</span>
<span class="sd">           ax = out.subcatch_series(out.subcatchments, &#39;runoff_rate&#39;, columns=&#39;elem&#39;).plot(figsize=(8,4))</span>
<span class="sd">           plt.title(&quot;Runoff Rate&quot;)</span>
<span class="sd">           plt.tight_layout()</span>
<span class="sd">           plt.show()</span>


<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">subcatchementArray</span><span class="p">,</span> <span class="n">subcatchmentIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateElement</span><span class="p">(</span>
            <span class="n">subcatchment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcatchments</span>
        <span class="p">)</span>

        <span class="n">attributeArray</span><span class="p">,</span> <span class="n">attributeIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateAttribute</span><span class="p">(</span>
            <span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcatch_attributes</span>
        <span class="p">)</span>

        <span class="n">startIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">endIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_period</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_series</span><span class="p">(</span>
            <span class="n">subcatchmentIndexArray</span><span class="p">,</span>
            <span class="n">attributeIndexArray</span><span class="p">,</span>
            <span class="n">startIndex</span><span class="p">,</span>
            <span class="n">endIndex</span><span class="p">,</span>
            <span class="n">columns</span><span class="p">,</span>
            <span class="n">output</span><span class="o">.</span><span class="n">get_subcatch_series</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_series_index</span><span class="p">(</span>
            <span class="n">subcatchementArray</span><span class="p">,</span> <span class="n">attributeArray</span><span class="p">,</span> <span class="n">startIndex</span><span class="p">,</span> <span class="n">endIndex</span><span class="p">,</span> <span class="n">columns</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span></div>

<div class="viewcode-block" id="Output.node_series"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.node_series.html#swmm.pandas.Output.node_series">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">node_series</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">node</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;invert_depth&quot;</span><span class="p">,</span>
            <span class="s2">&quot;flooding_losses&quot;</span><span class="p">,</span>
            <span class="s2">&quot;total_inflow&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">start</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;attr&quot;</span><span class="p">,</span>
        <span class="n">asframe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get one or more time series for one or more node attributes.</span>
<span class="sd">        Specify series start index and end index to get desired time range.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        node: Union[int, str, Sequence[Union[int, str]], None]</span>
<span class="sd">            The node index or name.</span>

<span class="sd">        attribute: Union[int, str, Enum, Sequence[Union[int, str, Enum]], None],</span>
<span class="sd">            The attribute index or name.</span>

<span class="sd">            On of:</span>

<span class="sd">            **invert_depth, hydraulic_head, ponded_volume, lateral_inflow,</span>
<span class="sd">            total_inflow, flooding_losses**.</span>

<span class="sd">            defaults to: `(&#39;invert_depth&#39;,&#39;flooding_losses&#39;,&#39;total_inflow&#39;)`</span>

<span class="sd">            Can also input the integer index of the attribute you would like to</span>
<span class="sd">            pull or the actual enum from Output.node_attributes.</span>

<span class="sd">            Setting to None indicates all attributes.</span>

<span class="sd">        start: Union[str, int, datetime, None], optional</span>
<span class="sd">            The start datetime or index of from which to return series, defaults to None.</span>

<span class="sd">            Setting to None indicates simulation start.</span>

<span class="sd">        end: Union[str, int, datetime, None], optional</span>
<span class="sd">            The end datetime or index of from which to return series, defaults to None.</span>

<span class="sd">            Setting to None indicates simulation end.</span>

<span class="sd">        columns: Optional[str], optional</span>
<span class="sd">            Decide whether or not to break out elements or attributes as columns. May be one of:</span>

<span class="sd">            None: Return long-form data with one column for each data point</span>

<span class="sd">            &#39;elem&#39;: Return data with a column for each element. If more than one attribute are given, attribute names are added to the index.</span>

<span class="sd">            &#39;attr&#39;: Return data with a column for each attribute. If more than one element are given, element names are added to the index.</span>

<span class="sd">            defaults to &#39;attr&#39;.</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame,np.ndarray]</span>
<span class="sd">            A DataFrame or ndarray of attribute values in each column for requested</span>
<span class="sd">            date range and nodes.</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>

<span class="sd">        Pull single time series for a single node</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.node_series(&#39;JUNC2&#39;, &#39;invert_depth&#39;)</span>
<span class="sd">                             invert_depth</span>
<span class="sd">        datetime</span>
<span class="sd">        1900-01-01 00:05:00      0.334742</span>
<span class="sd">        1900-01-01 00:10:00      0.509440</span>
<span class="sd">        1900-01-01 00:15:00      0.562722</span>
<span class="sd">        1900-01-01 00:20:00      0.602668</span>
<span class="sd">        1900-01-01 00:25:00      0.631424</span>
<span class="sd">        ...                           ...</span>
<span class="sd">        1900-01-01 23:40:00      0.766949</span>
<span class="sd">        1900-01-01 23:45:00      0.766949</span>
<span class="sd">        1900-01-01 23:50:00      0.766949</span>
<span class="sd">        1900-01-01 23:55:00      0.766949</span>
<span class="sd">        1900-01-02 00:00:00      0.766949</span>
<span class="sd">        [288 rows x 1 columns]</span>

<span class="sd">        Pull a wide-form dataframe for all parameters for a node</span>

<span class="sd">        &gt;&gt;&gt; out.node_series(&#39;JUNC2&#39;, out.node_attributes)</span>
<span class="sd">                           invert_depth  hydraulic_head  ponded_volume  lateral_inflow  total_inflow  flooding_losses  groundwater  pol_rainfall     sewage</span>
<span class="sd">        datetime</span>
<span class="sd">        1900-01-01 00:05:00      0.334742       -0.705258            0.0        0.185754      0.185785              0.0     3.935642      0.000000  95.884094</span>
<span class="sd">        1900-01-01 00:10:00      0.509440       -0.530560            0.0        0.196764      0.197044              0.0     8.902034      0.000000  90.335831</span>
<span class="sd">        1900-01-01 00:15:00      0.562722       -0.477278            0.0        0.198615      0.199436              0.0     9.038609      0.000000  89.253334</span>
<span class="sd">        1900-01-01 00:20:00      0.602668       -0.437332            0.0        0.200802      0.202462              0.0     9.259741      0.000000  87.919571</span>
<span class="sd">        1900-01-01 00:25:00      0.631424       -0.408576            0.0        0.203108      0.205802              0.0     9.523322      0.000000  86.492836</span>
<span class="sd">        ...                           ...             ...            ...             ...           ...              ...          ...           ...        ...</span>
<span class="sd">        1900-01-01 23:40:00      0.766949       -0.273052            0.0        0.314470      0.352183              0.0    15.293419     39.303375  45.430920</span>
<span class="sd">        1900-01-01 23:45:00      0.766949       -0.273052            0.0        0.314499      0.352183              0.0    15.313400     39.292118  45.430920</span>
<span class="sd">        1900-01-01 23:50:00      0.766949       -0.273052            0.0        0.314530      0.352183              0.0    15.333243     39.281300  45.430920</span>
<span class="sd">        1900-01-01 23:55:00      0.766949       -0.273052            0.0        0.314559      0.352183              0.0    15.352408     39.271194  45.430920</span>
<span class="sd">        1900-01-02 00:00:00      0.766949       -0.273052            0.0        0.314590      0.352183              0.0    15.371475     39.261478  45.430920</span>
<span class="sd">        [288 rows x 9 columns]</span>

<span class="sd">        Pull a long-form dataframe of all nodes and attributes</span>

<span class="sd">        &gt;&gt;&gt; out.node_series(&#39;JUNC2&#39;, out.node_attributes, columns=None)</span>
<span class="sd">                                                    result</span>
<span class="sd">        datetime            element attribute</span>
<span class="sd">        1900-01-01 00:05:00 JUNC1   invert_depth   0.002143</span>
<span class="sd">        1900-01-01 00:10:00 JUNC1   invert_depth   0.010006</span>
<span class="sd">        1900-01-01 00:15:00 JUNC1   invert_depth   0.017985</span>
<span class="sd">        1900-01-01 00:20:00 JUNC1   invert_depth   0.025063</span>
<span class="sd">        1900-01-01 00:25:00 JUNC1   invert_depth   0.031329</span>
<span class="sd">        ...                                             ...</span>
<span class="sd">        1900-01-01 23:40:00 STOR1   sewage        51.502193</span>
<span class="sd">        1900-01-01 23:45:00 STOR1   sewage        51.164684</span>
<span class="sd">        1900-01-01 23:50:00 STOR1   sewage        50.905445</span>
<span class="sd">        1900-01-01 23:55:00 STOR1   sewage        50.715385</span>
<span class="sd">        1900-01-02 00:00:00 STOR1   sewage        50.574486</span>
<span class="sd">        [23328 rows x 1 columns]</span>

<span class="sd">        Pull flow timeseries and calculate the total flow volume for all nodes</span>


<span class="sd">        &gt;&gt;&gt; from swmm.pandas.constants import gal_per_cf</span>
<span class="sd">        &gt;&gt;&gt; df = out.node_series(out.nodes, [&#39;lateral_inflow&#39;,&#39;total_inflow&#39;,&#39;flooding_losses&#39;])</span>
<span class="sd">                                     lateral_inflow  total_inflow  flooding_losses</span>
<span class="sd">        datetime            element</span>
<span class="sd">        1900-01-01 00:05:00 JUNC1          0.002362      0.002362              0.0</span>
<span class="sd">        1900-01-01 00:10:00 JUNC1          0.005792      0.005792              0.0</span>
<span class="sd">        1900-01-01 00:15:00 JUNC1          0.006524      0.006524              0.0</span>
<span class="sd">        1900-01-01 00:20:00 JUNC1          0.007306      0.007306              0.0</span>
<span class="sd">        1900-01-01 00:25:00 JUNC1          0.008039      0.008039              0.0</span>
<span class="sd">        ...                                     ...           ...              ...</span>
<span class="sd">        1900-01-01 23:40:00 STOR1          0.000000      1.455056              0.0</span>
<span class="sd">        1900-01-01 23:45:00 STOR1          0.000000      1.455056              0.0</span>
<span class="sd">        1900-01-01 23:50:00 STOR1          0.000000      1.455056              0.0</span>
<span class="sd">        1900-01-01 23:55:00 STOR1          0.000000      1.455056              0.0</span>
<span class="sd">        1900-01-02 00:00:00 STOR1          0.000000      1.455056              0.0</span>
<span class="sd">        [2592 rows x 3 columns]</span>
<span class="sd">        #----------------------------------------------------------------------------</span>
<span class="sd">        # group by element name and sum,</span>
<span class="sd">        # then multiply by reporting timestep in seconds</span>
<span class="sd">        # then convert to millions of gallons</span>
<span class="sd">        &gt;&gt;&gt; df.groupby(&#39;element&#39;).sum() * out.report * gal_per_cf / 1e6</span>
<span class="sd">                lateral_inflow  total_inflow  flooding_losses</span>
<span class="sd">        element</span>
<span class="sd">        JUNC1          0.101562      0.101898         0.000053</span>
<span class="sd">        JUNC2          0.544891      0.857012         0.000000</span>
<span class="sd">        JUNC3          0.000000      0.502078         0.080634</span>
<span class="sd">        JUNC4          1.813826      2.096243         0.317929</span>
<span class="sd">        JUNC5          0.000000      1.870291         0.073878</span>
<span class="sd">        JUNC6          0.000000      1.701455         0.000000</span>
<span class="sd">        OUT1           0.000000      1.698081         0.000000</span>
<span class="sd">        OUT2           0.000000      0.575617         0.000000</span>
<span class="sd">        STOR1          0.000000      1.862843         0.172482</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nodeArray</span><span class="p">,</span> <span class="n">nodeIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateElement</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>

        <span class="n">attributeArray</span><span class="p">,</span> <span class="n">attributeIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateAttribute</span><span class="p">(</span>
            <span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_attributes</span>
        <span class="p">)</span>

        <span class="n">startIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">endIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_period</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_series</span><span class="p">(</span>
            <span class="n">nodeIndexArray</span><span class="p">,</span>
            <span class="n">attributeIndexArray</span><span class="p">,</span>
            <span class="n">startIndex</span><span class="p">,</span>
            <span class="n">endIndex</span><span class="p">,</span>
            <span class="n">columns</span><span class="p">,</span>
            <span class="n">output</span><span class="o">.</span><span class="n">get_node_series</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_series_index</span><span class="p">(</span>
            <span class="n">nodeArray</span><span class="p">,</span> <span class="n">attributeArray</span><span class="p">,</span> <span class="n">startIndex</span><span class="p">,</span> <span class="n">endIndex</span><span class="p">,</span> <span class="n">columns</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span></div>

<div class="viewcode-block" id="Output.link_series"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.link_series.html#swmm.pandas.Output.link_series">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">link_series</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">link</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;flow_rate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;flow_velocity&quot;</span><span class="p">,</span>
            <span class="s2">&quot;flow_depth&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">start</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">columns</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;attr&quot;</span><span class="p">,</span>
        <span class="n">asframe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get one or more time series for one or more link attributes.</span>
<span class="sd">        Specify series start index and end index to get desired time range.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        link: Union[int, str, Sequence[Union[int, str]], None]</span>
<span class="sd">            The link index or name.</span>

<span class="sd">        attribute: Union[int, str, Enum, Sequence[Union[int, str, Enum]], None]</span>
<span class="sd">            The attribute index or name.</span>

<span class="sd">            On of:</span>

<span class="sd">            **flow_rate, flow_depth, flow_velocity, flow_volume, capacity**.</span>

<span class="sd">            defaults to: `(&#39;flow_rate&#39;,&#39;flow_velocity&#39;,&#39;flow_depth&#39;)`</span>

<span class="sd">            Can also input the integer index of the attribute you would like to</span>
<span class="sd">            pull or the actual enum from output.link_attributes.</span>

<span class="sd">            Setting to None indicates all attributes.</span>

<span class="sd">        start_index: Union[str,int, datetime, None], optional</span>
<span class="sd">            The start datetime or index of from which to return series, defaults to None.</span>

<span class="sd">            Setting to None indicates simulation start.</span>

<span class="sd">        end_index: Union[str,int, datetime, None], optional</span>
<span class="sd">            The end datetime or index of from which to return series, defaults to None.</span>

<span class="sd">            Setting to None indicates simulation end.</span>

<span class="sd">        columns: Optional[str], optional</span>
<span class="sd">            Decide whether or not to break out elements or attributes as columns. May be one of:</span>

<span class="sd">            None: Return long-form data with one column for each data point</span>

<span class="sd">            &#39;elem&#39;: Return data with a column for each element. If more than one attribute are given, attribute names are added to the index.</span>

<span class="sd">            &#39;attr&#39;: Return data with a column for each attribute. If more than one element are given, element names are added to the index.</span>

<span class="sd">            defaults to &#39;attr&#39;.</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame,np.ndarray]</span>
<span class="sd">            A DataFrame or ndarray of attribute values in each column for requested</span>
<span class="sd">            date range and links.</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>

<span class="sd">        Pull flow rate for two conduits</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.link_series([&#39;COND1&#39;,&#39;COND6&#39;],out.link_attributes.FLOW_RATE,columns=&#39;elem&#39;)</span>
<span class="sd">                                COND1   COND6</span>
<span class="sd">        datetime</span>
<span class="sd">        1900-01-01 00:05:00  0.000031  0.0000</span>
<span class="sd">        1900-01-01 00:10:00  0.000280  0.0000</span>
<span class="sd">        1900-01-01 00:15:00  0.000820  0.0000</span>
<span class="sd">        1900-01-01 00:20:00  0.001660  0.0000</span>
<span class="sd">        1900-01-01 00:25:00  0.002694  0.0000</span>
<span class="sd">        ...                       ...     ...</span>
<span class="sd">        1900-01-01 23:40:00  0.037800  1.5028</span>
<span class="sd">        1900-01-01 23:45:00  0.037800  1.5028</span>
<span class="sd">        1900-01-01 23:50:00  0.037800  1.5028</span>
<span class="sd">        1900-01-01 23:55:00  0.037800  1.5028</span>
<span class="sd">        1900-01-02 00:00:00  0.037800  1.5028</span>
<span class="sd">        [288 rows x 2 columns]</span>

<span class="sd">        Pull a wide-form dataframe for all parameters for a link</span>

<span class="sd">        &gt;&gt;&gt; out.node_series(&#39;COND1&#39;, out.link_attributes)</span>
<span class="sd">                            flow_rate  flow_depth  flow_velocity  flow_volume  capacity  groundwater  pol_rainfall        sewage</span>
<span class="sd">        datetime</span>
<span class="sd">        1900-01-01 00:05:00   0.000031    0.053857       0.001116    23.910770  0.024351    79.488449      0.000000  0.000000e+00</span>
<span class="sd">        1900-01-01 00:10:00   0.000280    0.134876       0.004258    76.354103  0.080857    93.174545      0.000000  0.000000e+00</span>
<span class="sd">        1900-01-01 00:15:00   0.000820    0.165356       0.009518    99.407425  0.108456    91.125893      0.000000  0.000000e+00</span>
<span class="sd">        1900-01-01 00:20:00   0.001660    0.188868       0.016023   117.895081  0.131204    88.518318      0.000000  0.000000e+00</span>
<span class="sd">        1900-01-01 00:25:00   0.002694    0.206378       0.022971   131.773941  0.148936    86.187752      0.000000  0.000000e+00</span>
<span class="sd">        ...                        ...         ...            ...          ...       ...          ...           ...           ...</span>
<span class="sd">        1900-01-01 23:40:00   0.037800    0.312581       0.180144   212.443344  0.267168    31.683731     68.344780  6.173063e-08</span>
<span class="sd">        1900-01-01 23:45:00   0.037800    0.312581       0.180144   212.443344  0.267168    31.788561     68.242958  5.872794e-08</span>
<span class="sd">        1900-01-01 23:50:00   0.037800    0.312581       0.180144   212.443344  0.267168    31.890982     68.144737  5.583060e-08</span>
<span class="sd">        1900-01-01 23:55:00   0.037800    0.312581       0.180144   212.443344  0.267168    31.988274     68.052620  5.311425e-08</span>
<span class="sd">        1900-01-02 00:00:00   0.037800    0.312581       0.180144   212.443344  0.267168    32.083355     67.963829  5.049533e-08</span>

<span class="sd">        [288 rows x 8 columns]</span>

<span class="sd">        Pull a long-form dataframe of all links and attributes</span>

<span class="sd">        &gt;&gt;&gt; out.node_series(out.links, out.link_attributes, columns=None)</span>
<span class="sd">                                    flow_rate  flow_depth  flow_velocity  flow_volume  capacity  groundwater  pol_rainfall    sewage</span>
<span class="sd">        datetime            element</span>
<span class="sd">        1900-01-01 00:05:00 COND1     0.000031    0.053857       0.001116    23.910770  0.024351    79.488449      0.000000   0.00000</span>
<span class="sd">        1900-01-01 00:10:00 COND1     0.000280    0.134876       0.004258    76.354103  0.080857    93.174545      0.000000   0.00000</span>
<span class="sd">        1900-01-01 00:15:00 COND1     0.000820    0.165356       0.009518    99.407425  0.108456    91.125893      0.000000   0.00000</span>
<span class="sd">        1900-01-01 00:20:00 COND1     0.001660    0.188868       0.016023   117.895081  0.131204    88.518318      0.000000   0.00000</span>
<span class="sd">        1900-01-01 00:25:00 COND1     0.002694    0.206378       0.022971   131.773941  0.148936    86.187752      0.000000   0.00000</span>
<span class="sd">        ...                                ...         ...            ...          ...       ...          ...           ...       ...</span>
<span class="sd">        1900-01-01 23:40:00 WR1       0.000000    0.000000       0.000000     0.000000  1.000000    15.293419     39.303375  45.43092</span>
<span class="sd">        1900-01-01 23:45:00 WR1       0.000000    0.000000       0.000000     0.000000  1.000000    15.313400     39.292118  45.43092</span>
<span class="sd">        1900-01-01 23:50:00 WR1       0.000000    0.000000       0.000000     0.000000  1.000000    15.333243     39.281300  45.43092</span>
<span class="sd">        1900-01-01 23:55:00 WR1       0.000000    0.000000       0.000000     0.000000  1.000000    15.352408     39.271194  45.43092</span>
<span class="sd">        1900-01-02 00:00:00 WR1       0.000000    0.000000       0.000000     0.000000  1.000000    15.371475     39.261478  45.43092</span>
<span class="sd">        [2304 rows x 8 columns]</span>

<span class="sd">        Pull flow timeseries and pollutant tracer concentrations for a link and plot</span>

<span class="sd">        .. plot::</span>

<span class="sd">            import matplotlib.pyplot as plt</span>
<span class="sd">            import matplotlib.dates as mdates</span>
<span class="sd">            from swmm.pandas import Output,test_out_path</span>

<span class="sd">            out = Output(test_out_path)</span>
<span class="sd">            df = out.link_series(&#39;COND6&#39;,[&#39;flow_rate&#39;,&#39;groundwater&#39;,&#39;pol_rainfall&#39;,&#39;sewage&#39;])</span>

<span class="sd">            # set up figure</span>
<span class="sd">            fig,ax = plt.subplots(figsize=(8,4))</span>

<span class="sd">            # plot flow rate on primary yaxis</span>
<span class="sd">            ax.plot(df.flow_rate,label=&quot;flow rate&quot;)</span>

<span class="sd">            # plot pollutant concentrations on secondary axis</span>
<span class="sd">            # rainfall, DWF, and groundwater were given 100 mg/L pollutant</span>
<span class="sd">            # concentrations to serve as tracers</span>
<span class="sd">            ax1 = ax.twinx()</span>
<span class="sd">            ax1.plot(df.groundwater,ls = &#39;--&#39;,label=&quot;groundwater tracer&quot;)</span>
<span class="sd">            ax1.plot(df.pol_rainfall,ls = &#39;--&#39;,label=&quot;rainfall tracer&quot;)</span>
<span class="sd">            ax1.plot(df.sewage,ls = &#39;--&#39;,label=&quot;sewage tracer&quot;)</span>

<span class="sd">            # style axes</span>
<span class="sd">            ax.set_ylabel(&quot;Flow Rate (cfs)&quot;)</span>
<span class="sd">            ax.xaxis.set_major_formatter(mdates.DateFormatter(&quot;%H:%M&quot;))</span>
<span class="sd">            ax1.set_ylabel(&quot;Percent&quot;)</span>

<span class="sd">            # add legend and show figure</span>
<span class="sd">            fig.legend(bbox_to_anchor=(1,1),bbox_transform=ax.transAxes)</span>
<span class="sd">            fig.tight_layout()</span>


<span class="sd">            fig.show()</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">linkArray</span><span class="p">,</span> <span class="n">linkIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateElement</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="p">)</span>

        <span class="n">attributeArray</span><span class="p">,</span> <span class="n">attributeIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateAttribute</span><span class="p">(</span>
            <span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">link_attributes</span>
        <span class="p">)</span>

        <span class="n">startIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">endIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_period</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_series</span><span class="p">(</span>
            <span class="n">linkIndexArray</span><span class="p">,</span>
            <span class="n">attributeIndexArray</span><span class="p">,</span>
            <span class="n">startIndex</span><span class="p">,</span>
            <span class="n">endIndex</span><span class="p">,</span>
            <span class="n">columns</span><span class="p">,</span>
            <span class="n">output</span><span class="o">.</span><span class="n">get_link_series</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model_series_index</span><span class="p">(</span>
            <span class="n">linkArray</span><span class="p">,</span> <span class="n">attributeArray</span><span class="p">,</span> <span class="n">startIndex</span><span class="p">,</span> <span class="n">endIndex</span><span class="p">,</span> <span class="n">columns</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">cols</span><span class="p">)</span></div>

<div class="viewcode-block" id="Output.system_series"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.system_series.html#swmm.pandas.Output.system_series">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">system_series</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">start</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">end</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">asframe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get one or more a time series for one or more system attributes.</span>
<span class="sd">        Specify series start index and end index to get desired time range.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        attribute: Union[int, str, Enum, Sequence[Union[int, str, Enum]], None]</span>
<span class="sd">            The attribute index or name.</span>

<span class="sd">            On of:</span>

<span class="sd">            **air_temp, rainfall, snow_depth, evap_infil_loss, runoff_flow,</span>
<span class="sd">            dry_weather_inflow, gw_inflow, rdii_inflow, direct_inflow, total_lateral_inflow,</span>
<span class="sd">            flood_losses, outfall_flows, volume_stored, evap_rate**.</span>

<span class="sd">            defaults to `None`.</span>

<span class="sd">            Can also input the integer index of the attribute you would like to</span>
<span class="sd">            pull or the actual enum from Output.system_attributes.</span>

<span class="sd">            Setting to None indicates all attributes.</span>

<span class="sd">        start_index: Union[str, int, datetime, None], optional</span>
<span class="sd">            The start datetime or index of from which to return series, defaults to None.</span>

<span class="sd">            Setting to None indicates simulation start.</span>

<span class="sd">        end_index: Union[str, int, datetime, None], optional</span>
<span class="sd">            The end datetime or index of from which to return series, defaults to None.</span>

<span class="sd">            Setting to None indicates simulation end.</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame,np.ndarray]</span>
<span class="sd">            DataFrame or ndarray of attribute values in each column for request date range</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>

<span class="sd">        Pull two system attribute time series</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.system_series([&#39;total_lateral_inflow&#39;,&#39;rainfall&#39;])</span>
<span class="sd">                            total_lateral_inflow  rainfall</span>
<span class="sd">        datetime</span>
<span class="sd">        1900-01-01 00:05:00              0.902807   0.03000</span>
<span class="sd">        1900-01-01 00:10:00              0.902800   0.03000</span>
<span class="sd">        1900-01-01 00:15:00              0.902793   0.03000</span>
<span class="sd">        1900-01-01 00:20:00              0.902786   0.03000</span>
<span class="sd">        1900-01-01 00:25:00              0.902779   0.03000</span>
<span class="sd">        ...                                   ...       ...</span>
<span class="sd">        1900-01-01 23:40:00              1.431874   0.03224</span>
<span class="sd">        1900-01-01 23:45:00              1.431869   0.03224</span>
<span class="sd">        1900-01-01 23:50:00              1.431876   0.03224</span>
<span class="sd">        1900-01-01 23:55:00              1.431894   0.03224</span>
<span class="sd">        1900-01-02 00:00:00              1.431921   0.00000</span>
<span class="sd">        [288 rows x 2 columns]</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">attributeArray</span><span class="p">,</span> <span class="n">attributeIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateAttribute</span><span class="p">(</span>
            <span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_attributes</span>
        <span class="p">)</span>

        <span class="n">startIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">endIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">end</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_period</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">stack</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">output</span><span class="o">.</span><span class="n">get_system_series</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">sysAttr</span><span class="p">,</span> <span class="n">startIndex</span><span class="p">,</span> <span class="n">endIndex</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">sysAttr</span> <span class="ow">in</span> <span class="n">attributeIndexArray</span>
            <span class="p">],</span>
            <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">[</span><span class="n">startIndex</span><span class="p">:</span><span class="n">endIndex</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;datetime&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">attributeArray</span><span class="p">)</span></div>

    <span class="c1">####### attribute getters #######</span>

<div class="viewcode-block" id="Output.subcatch_attribute"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.subcatch_attribute.html#swmm.pandas.Output.subcatch_attribute">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">subcatch_attribute</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">],</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;rainfall&quot;</span><span class="p">,</span>
            <span class="s2">&quot;runoff_rate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;gw_outflow_rate&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">asframe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;For all subcatchments at a given time, get a one or more attributes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        time: Union[str, int, datetime]</span>
<span class="sd">            The datetime or simulation index for which to pull data, defaults to None.</span>

<span class="sd">        attribute: Union[int, str, Enum, Sequence[Union[int, str, Enum]], None],</span>
<span class="sd">            The attribute index or name.</span>

<span class="sd">            On of:</span>

<span class="sd">            **rainfall, snow_depth, evap_loss, infil_loss, runoff_rate, gw_outflow_rate,</span>
<span class="sd">            gw_table_elev, soil_moisture**.</span>

<span class="sd">            Defaults to: `(&#39;rainfall&#39;,&#39;runoff_rate&#39;,&#39;gw_outflow_rate&#39;).`</span>

<span class="sd">            You can also input the integer index of the attribute you would like to</span>
<span class="sd">            pull or the actual enum from Output.subcatch_attributes.</span>

<span class="sd">            Setting to None indicates all attributes.</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame, np.ndarray]</span>
<span class="sd">            A DataFrame or ndarray of attribute values in each column for requested simulation time.</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>
<span class="sd">        Pull rainfall for all catchments at start of simulation</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.subcatch_attribute(0,&#39;rainfall&#39;)</span>
<span class="sd">                          rainfall</span>
<span class="sd">            subcatchment</span>
<span class="sd">            SUB1              0.03</span>
<span class="sd">            SUB2              0.03</span>
<span class="sd">            SUB3              0.03</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">attributeArray</span><span class="p">,</span> <span class="n">attributeIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateAttribute</span><span class="p">(</span>
            <span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcatch_attributes</span>
        <span class="p">)</span>

        <span class="n">timeIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">([</span><span class="n">time</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">stack</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">output</span><span class="o">.</span><span class="n">get_subcatch_attribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">timeIndex</span><span class="p">,</span> <span class="n">scAttr</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">scAttr</span> <span class="ow">in</span> <span class="n">attributeIndexArray</span>
            <span class="p">],</span>
            <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subcatchments</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;subcatchment&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">attributeArray</span><span class="p">)</span></div>

<div class="viewcode-block" id="Output.node_attribute"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.node_attribute.html#swmm.pandas.Output.node_attribute">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">node_attribute</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">],</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;invert_depth&quot;</span><span class="p">,</span>
            <span class="s2">&quot;flooding_losses&quot;</span><span class="p">,</span>
            <span class="s2">&quot;total_inflow&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">asframe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;For all nodes at a given time, get one or more attributes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        time: Union[str, int, datetime]</span>
<span class="sd">            The datetime or simulation index for which to pull data, defaults to None</span>

<span class="sd">        attribute: Union[int, str, Enum, Sequence[Union[int, str, Enum]], None],</span>
<span class="sd">            The attribute index or name.</span>

<span class="sd">            On of:</span>

<span class="sd">            **invert_depth, hydraulic_head, ponded_volume, lateral_inflow,</span>
<span class="sd">            total_inflow, flooding_losses**.</span>

<span class="sd">            defaults to: `(&#39;invert_depth&#39;,&#39;flooding_losses&#39;,&#39;total_inflow&#39;)`</span>

<span class="sd">            Can also input the integer index of the attribute you would like to</span>
<span class="sd">            pull or the actual enum from Output.node_attributes.</span>

<span class="sd">            Setting to None indicates all attributes.</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame, np.ndarray]</span>
<span class="sd">            A DataFrame or ndarray of attribute values in each column for requested simulation time.</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>
<span class="sd">        Pull all attributes from middle of simulation</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.node_attribute(out.period/2)</span>
<span class="sd">                   invert_depth  hydraulic_head  ponded_volume  ...  groundwater  pol_rainfall    sewage</span>
<span class="sd">            node                                                ...</span>
<span class="sd">            JUNC1      8.677408       10.177408       0.000000  ...     0.260937     99.739067  0.000000</span>
<span class="sd">            JUNC2      4.286304        3.246305       0.000000  ...     0.366218     96.767433  2.475719</span>
<span class="sd">            JUNC3     11.506939        8.036940      35.862713  ...     0.615687     94.522049  4.862284</span>
<span class="sd">            JUNC4     14.936149        9.686150    6107.279785  ...     0.381425     96.532028  3.086555</span>
<span class="sd">            JUNC5     11.190232        4.690233       0.000000  ...     0.443388     95.959351  3.597255</span>
<span class="sd">            JUNC6      1.650765        1.650765       0.000000  ...     0.963940     91.113075  7.922997</span>
<span class="sd">            OUT1       0.946313        1.046313       0.000000  ...     0.969624     91.060143  7.970241</span>
<span class="sd">            OUT2       0.000000       -1.040001       0.000000  ...     0.367271     96.756134  2.479369</span>
<span class="sd">            STOR1     18.282972        3.032968    7550.865723  ...     0.961457     91.136200  7.902364</span>
<span class="sd">            [9 rows x 9 columns]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attributeArray</span><span class="p">,</span> <span class="n">attributeIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateAttribute</span><span class="p">(</span>
            <span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">node_attributes</span>
        <span class="p">)</span>

        <span class="n">timeIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">([</span><span class="n">time</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">stack</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">output</span><span class="o">.</span><span class="n">get_node_attribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">timeIndex</span><span class="p">,</span> <span class="n">ndAttr</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">ndAttr</span> <span class="ow">in</span> <span class="n">attributeIndexArray</span>
            <span class="p">],</span>
            <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;node&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">attributeArray</span><span class="p">)</span></div>

<div class="viewcode-block" id="Output.link_attribute"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.link_attribute.html#swmm.pandas.Output.link_attribute">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">link_attribute</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">],</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;flow_rate&quot;</span><span class="p">,</span>
            <span class="s2">&quot;flow_velocity&quot;</span><span class="p">,</span>
            <span class="s2">&quot;flow_depth&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">asframe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;For all links at a given time, get one or more attributes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        time: Union[str, int, datetime]</span>
<span class="sd">            The datetime or simulation index for which to pull data, defaults to None.</span>

<span class="sd">        attribute: Union[int, str, Sequence[Union[int, str]], None]</span>
<span class="sd">            The attribute index or name.</span>

<span class="sd">            On of:</span>

<span class="sd">            flow_rate, flow_depth, flow_velocity, flow_volume, capacity,</span>

<span class="sd">            defaults to `(&#39;flow_rate&#39;,&#39;flow_velocity&#39;,&#39;flow_depth&#39;)`</span>

<span class="sd">            Can also input the integer index of the attribute you would like to</span>
<span class="sd">            pull or the actual enum from Output.link_attributes.</span>

<span class="sd">            Setting to None indicates all attributes.</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        pd.DataFrame</span>
<span class="sd">            A DataFrame of attribute values in each column for requested simulation time.</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>
<span class="sd">        Pull depth. flooding, and total inflow attributes from end of simulation</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.link_attribute(out.period/2)</span>
<span class="sd">                   invert_depth  flooding_losses  total_inflow</span>
<span class="sd">            node</span>
<span class="sd">            JUNC1      8.677408         0.000000      2.665294</span>
<span class="sd">            JUNC2      4.286304         0.000000     14.571551</span>
<span class="sd">            JUNC3     11.506939         0.341040      2.319820</span>
<span class="sd">            JUNC4     14.936149        16.137648     27.521870</span>
<span class="sd">            JUNC5     11.190232         0.000000      9.051201</span>
<span class="sd">            JUNC6      1.650765         0.000000      5.799996</span>
<span class="sd">            OUT1       0.946313         0.000000      5.799996</span>
<span class="sd">            OUT2       0.000000         0.000000     14.574173</span>
<span class="sd">            STOR1     18.282972         0.000000      9.048394</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attributeArray</span><span class="p">,</span> <span class="n">attributeIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateAttribute</span><span class="p">(</span>
            <span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">link_attributes</span>
        <span class="p">)</span>

        <span class="n">timeIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">([</span><span class="n">time</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">stack</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">output</span><span class="o">.</span><span class="n">get_link_attribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">timeIndex</span><span class="p">,</span> <span class="n">lnkAttr</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">lnkAttr</span> <span class="ow">in</span> <span class="n">attributeIndexArray</span>
            <span class="p">],</span>
            <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;link&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">attributeArray</span><span class="p">)</span></div>

<div class="viewcode-block" id="Output.system_attribute"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.system_attribute.html#swmm.pandas.Output.system_attribute">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">system_attribute</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">],</span>
        <span class="n">attribute</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">]],</span> <span class="kc">None</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">asframe</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;For all nodes at given time, get a one or more attributes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        time: Union[str, int, datetime]</span>
<span class="sd">            The datetime or simulation index for which to pull data, defaults to None.</span>

<span class="sd">        attribute: Union[int, str, Sequence[Union[int, str]], None]</span>
<span class="sd">            The attribute index or name.</span>

<span class="sd">            On of:</span>

<span class="sd">            **air_temp, rainfall, snow_depth, evap_infil_loss, runoff_flow,</span>
<span class="sd">            dry_weather_inflow, gw_inflow, rdii_inflow, direct_inflow, total_lateral_inflow,</span>
<span class="sd">            flood_losses, outfall_flows, volume_stored, evap_rate**.</span>

<span class="sd">            defaults to `None`.</span>

<span class="sd">            Can also input the integer index of the attribute you would like to</span>
<span class="sd">            pull or the actual enum from Output.system_attributes.</span>

<span class="sd">            Setting to None indicates all attributes.</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame,np.ndarray]</span>
<span class="sd">            A DataFrame of attribute values in each column for requested simulation time.</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>

<span class="sd">        Pull all system attributes for the 10th time step</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.system_attribute(10)</span>
<span class="sd">                                       result</span>
<span class="sd">            attribute</span>
<span class="sd">            air_temp                70.000000</span>
<span class="sd">            rainfall                 0.030000</span>
<span class="sd">            snow_depth               0.000000</span>
<span class="sd">            evap_infil_loss          0.015042</span>
<span class="sd">            runoff_flow              0.066304</span>
<span class="sd">            dry_weather_inflow       0.801000</span>
<span class="sd">            gw_inflow                0.101737</span>
<span class="sd">            rdii_inflow              0.000000</span>
<span class="sd">            direct_inflow            0.000000</span>
<span class="sd">            total_lateral_inflow     0.969041</span>
<span class="sd">            flood_losses             0.000000</span>
<span class="sd">            outfall_flows            0.944981</span>
<span class="sd">            volume_stored         1731.835938</span>
<span class="sd">            evap_rate                0.000000</span>
<span class="sd">            ptnl_evap_rate           0.000000</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">attributeArray</span><span class="p">,</span> <span class="n">attributeIndexArray</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateAttribute</span><span class="p">(</span>
            <span class="n">attribute</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">system_attributes</span>
        <span class="p">)</span>

        <span class="n">timeIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">([</span><span class="n">time</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">asarray</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">output</span><span class="o">.</span><span class="n">get_system_attribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">timeIndex</span><span class="p">,</span> <span class="n">sysAttr</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">sysAttr</span> <span class="ow">in</span> <span class="n">attributeIndexArray</span>
            <span class="p">]</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="n">attributeArray</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;attribute&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">])</span></div>

    <span class="c1">####### result getters #######</span>

<div class="viewcode-block" id="Output.subcatch_result"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.subcatch_result.html#swmm.pandas.Output.subcatch_result">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">subcatch_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">subcatchment</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">time</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">asframe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;For a subcatchment at one or more given times, get all attributes.</span>

<span class="sd">        Only one of `subcatchment` or `time` can be multiple (eg. a list), not both.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        subcatchment: Union[int, str, Sequence[Union[int, str]], None],</span>
<span class="sd">            The subcatchment(s) name(s) or index(s).</span>

<span class="sd">        time: Union[int, str, Sequence[Union[int, str]], None],</span>
<span class="sd">            THe datetime(s) or simulation index(s).</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame,np.ndarray]</span>
<span class="sd">            A DataFrame or ndarray of all attribute values subcatchment(s) at given time(s).</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>

<span class="sd">        Pull all attributes at start, middle, and end time steps for a single catchment</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.subcatch_result(&quot;SUB1&quot;,[0,out.period/2,out.period-1])</span>
<span class="sd">                                 rainfall  snow_depth  evap_loss  infil_loss  ...  soil_moisture  groundwater  pol_rainfall  sewage</span>
<span class="sd">            datetime                                                          ...</span>
<span class="sd">            1900-01-01 00:05:00     0.030         0.0        0.0    0.020820  ...       0.276035          0.0           0.0     0.0</span>
<span class="sd">            1900-01-01 12:05:00     1.212         0.0        0.0    0.594862  ...       0.281631          0.0         100.0     0.0</span>
<span class="sd">            1900-01-02 00:00:00     0.000         0.0        0.0    0.027270  ...       0.280026          0.0         100.0     0.0</span>
<span class="sd">            [3 rows x 11 columns]</span>

<span class="sd">        Pull all attributes for all catchments at the start of the simulation</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.subcatch_result(out.subcatchments,&#39;1900-01-01&#39;)</span>
<span class="sd">                          rainfall  snow_depth  evap_loss  infil_loss  ...  soil_moisture  groundwater  pol_rainfall  sewage</span>
<span class="sd">            subcatchment                                               ...</span>
<span class="sd">            SUB1              0.03         0.0        0.0    0.020820  ...       0.276035          0.0           0.0     0.0</span>
<span class="sd">            SUB2              0.03         0.0        0.0    0.017824  ...       0.275048          0.0           0.0     0.0</span>
<span class="sd">            SUB3              0.03         0.0        0.0    0.011365  ...       0.279013          0.0           0.0     0.0</span>
<span class="sd">            [3 rows x 11 columns]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subcatchment</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can only have multiple of one of subcatchment and time&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subcatchment</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">):</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;subcatchment&quot;</span>
            <span class="n">labels</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateElement</span><span class="p">(</span><span class="n">subcatchment</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">subcatchments</span><span class="p">)</span>
            <span class="n">timeIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">([</span><span class="n">time</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">values</span> <span class="o">=</span> <span class="n">vstack</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">get_subcatch_result</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">timeIndex</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">indices</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;datetime&quot;</span>
            <span class="n">times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span> <span class="k">if</span> <span class="n">time</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">atleast_1d</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">times</span><span class="p">)</span>

            <span class="c1"># since the timeIndex matches on nearst, we rebuild</span>
            <span class="c1"># the label in case it wasn&#39;t exact</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
            <span class="n">subcatchmentIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subcatchmentIndex</span><span class="p">(</span><span class="n">subcatchment</span><span class="p">)</span>

            <span class="n">values</span> <span class="o">=</span> <span class="n">atleast_2d</span><span class="p">(</span>
                <span class="n">vstack</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">get_subcatch_result</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">subcatchmentIndex</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">indices</span>
                    <span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">_enum_keys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">subcatch_attributes</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Output.node_result"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.node_result.html#swmm.pandas.Output.node_result">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">node_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">node</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">time</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">asframe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;For one or more nodes at one or more given times, get all attributes.</span>

<span class="sd">        Only one of `node` or `time` can be multiple (eg. a list), not both.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        node: Union[int, str, Sequence[Union[int, str]], None],</span>
<span class="sd">            The node(s) name(s) or index(s).</span>

<span class="sd">        time: Union[int, str, Sequence[Union[int, str]], None],</span>
<span class="sd">            The datetime(s) or simulation index(s).</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame,np.ndarray]</span>
<span class="sd">            A DataFrame or ndarray of all attribute values nodes(s) at given time(s).</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>

<span class="sd">        Pull all attributes at start, middle, and end time steps for a single node</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.node_result(&quot;JUNC1&quot;,[0,out.period/2,out.period-1])</span>
<span class="sd">                                 invert_depth  hydraulic_head  ponded_volume  lateral_inflow  ...  flooding_losses  groundwater  pol_rainfall  sewage</span>
<span class="sd">            datetime                                                                          ...</span>
<span class="sd">            1900-01-01 00:05:00      0.002143        1.502143            0.0        0.002362  ...              0.0    84.334671      0.000000     0.0</span>
<span class="sd">            1900-01-01 12:05:00      8.677408       10.177408            0.0        2.665294  ...              0.0     0.260937     99.739067     0.0</span>
<span class="sd">            1900-01-02 00:00:00      0.108214        1.608214            0.0        0.037889  ...              0.0    33.929119     66.251686     0.0</span>
<span class="sd">            [3 rows x 9 columns]</span>

<span class="sd">        Pull all attributes for all nodes at the start of the simulation</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.node_result(out.nodes,&#39;1900-01-01&#39;)</span>
<span class="sd">                   invert_depth  hydraulic_head  ponded_volume  lateral_inflow  total_inflow  flooding_losses  groundwater  pol_rainfall     sewage</span>
<span class="sd">            node</span>
<span class="sd">            JUNC1      0.002143        1.502143            0.0        0.002362      0.002362              0.0    84.334671           0.0   0.000000</span>
<span class="sd">            JUNC2      0.334742       -0.705258            0.0        0.185754      0.185785              0.0     3.935642           0.0  95.884094</span>
<span class="sd">            JUNC3      0.000000       -3.470001            0.0        0.000000      0.000000              0.0     0.000000           0.0   0.000000</span>
<span class="sd">            JUNC4      0.530241       -4.719759            0.0        0.657521      0.657521              0.0     5.066027           0.0  94.864769</span>
<span class="sd">            JUNC5      0.090128       -6.409873            0.0        0.000000      0.027627              0.0     2.723724           0.0  82.198524</span>
<span class="sd">            JUNC6      0.000000        0.000000            0.0        0.000000      0.000000              0.0     0.000000           0.0   0.000000</span>
<span class="sd">            OUT1       0.000000        0.100000            0.0        0.000000      0.000000              0.0     0.000000           0.0   0.000000</span>
<span class="sd">            OUT2       0.000000       -1.040000            0.0        0.000000      0.000000              0.0     0.000000           0.0   0.000000</span>
<span class="sd">            STOR1      0.000000      -15.250000            0.0        0.000000      0.000000              0.0     0.000000           0.0   0.000000</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can only have multiple of one of node and time&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">):</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;node&quot;</span>
            <span class="n">labels</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateElement</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
            <span class="n">timeIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">([</span><span class="n">time</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">vstack</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">get_node_result</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">timeIndex</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">indices</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;datetime&quot;</span>
            <span class="n">times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span> <span class="k">if</span> <span class="n">time</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">atleast_1d</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">times</span><span class="p">)</span>

            <span class="c1"># since the timeIndex matches on nearst, we rebuild</span>
            <span class="c1"># the label in case it wasn&#39;t exact</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>
            <span class="n">nodeIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_nodeIndex</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>

            <span class="n">values</span> <span class="o">=</span> <span class="n">atleast_2d</span><span class="p">(</span>
                <span class="n">vstack</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">get_node_result</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">nodeIndex</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">indices</span>
                    <span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">_enum_keys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">node_attributes</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Output.link_result"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.link_result.html#swmm.pandas.Output.link_result">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">link_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">link</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">time</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">str</span><span class="p">]],</span> <span class="kc">None</span><span class="p">],</span>
        <span class="n">asframe</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;For a link at one or more given times, get all attributes.</span>

<span class="sd">        Only one of link or time can be multiple.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        link: Union[int, str, Sequence[Union[int, str]], None],</span>
<span class="sd">            The link(s) name(s) or index(s).</span>

<span class="sd">        time: Union[int, str, Sequence[Union[int, str]], None],</span>
<span class="sd">            The datetime(s) or simulation index(s).</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame,np.ndarray]</span>
<span class="sd">            A DataFrame or ndarray of all attribute values link(s) at given time(s).</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>

<span class="sd">        Pull all attributes at start, middle, and end time steps for a single link</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.link_result(&quot;COND1&quot;,[0,out.period/2,out.period-1])</span>
<span class="sd">                                 flow_rate  flow_depth  flow_velocity  flow_volume  capacity  groundwater  pol_rainfall        sewage</span>
<span class="sd">            datetime</span>
<span class="sd">            1900-01-01 00:05:00   0.000031    0.053857       0.001116    23.910770  0.024351    79.488449      0.000000  0.000000e+00</span>
<span class="sd">            1900-01-01 12:05:00   2.665548    1.000000       3.393882   732.276428  1.000000     0.491514     99.142815  2.742904e-01</span>
<span class="sd">            1900-01-02 00:00:00   0.037800    0.312581       0.180144   212.443344  0.267168    32.083355     67.963829  5.049533e-08</span>

<span class="sd">        Pull all attributes for all links at the start of the simulation</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.link_result(out.links,&#39;1900-01-01&#39;)</span>
<span class="sd">                   flow_rate  flow_depth  flow_velocity  flow_volume  capacity  groundwater  pol_rainfall     sewage</span>
<span class="sd">            link</span>
<span class="sd">            COND1   0.000031    0.053857       0.001116    23.910770  0.024351    79.488449           0.0   0.000000</span>
<span class="sd">            COND2   0.000000    0.000100       0.000000     0.074102  0.000161     0.000000           0.0   0.000000</span>
<span class="sd">            COND3   0.000000    0.000100       0.000000     0.076337  0.000113     0.000000           0.0   0.000000</span>
<span class="sd">            COND4   0.027627    0.038128       0.304938    49.596237  0.026561     3.034879           0.0  86.882553</span>
<span class="sd">            COND5   0.000000    0.000100       0.000000     0.012962  0.000127     0.000000           0.0   0.000000</span>
<span class="sd">            COND6   0.000000    0.000100       0.000000     0.000404  0.000014     0.000000           0.0   0.000000</span>
<span class="sd">            PUMP1   0.000000    0.000000       0.000000     0.000000  0.000000     0.000000           0.0   0.000000</span>
<span class="sd">            WR1     0.000000    0.000000       0.000000     0.000000  1.000000     3.935642           0.0  95.884094</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Can only have multiple of one of link and time&quot;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">arrayish</span><span class="p">):</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;link&quot;</span>
            <span class="n">labels</span><span class="p">,</span> <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validateElement</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">links</span><span class="p">)</span>
            <span class="n">timeIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">([</span><span class="n">time</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

            <span class="n">values</span> <span class="o">=</span> <span class="n">vstack</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">output</span><span class="o">.</span><span class="n">get_link_result</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">timeIndex</span><span class="p">,</span> <span class="n">idx</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">indices</span>
                <span class="p">]</span>
            <span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;datetime&quot;</span>
            <span class="n">times</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span> <span class="k">if</span> <span class="n">time</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">atleast_1d</span><span class="p">(</span><span class="n">time</span><span class="p">)</span>
            <span class="n">indices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">(</span><span class="n">times</span><span class="p">)</span>

            <span class="c1"># since the timeIndex matches on nearst, we rebuild</span>
            <span class="c1"># the label in case it wasn&#39;t exact</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timeIndex</span><span class="p">[</span><span class="n">indices</span><span class="p">]</span>

            <span class="n">linkIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_linkIndex</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">atleast_2d</span><span class="p">(</span>
                <span class="n">vstack</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="n">output</span><span class="o">.</span><span class="n">get_link_result</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">linkIndex</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">indices</span>
                    <span class="p">]</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="n">labels</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">label</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span>
            <span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">_enum_keys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">link_attributes</span><span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Output.system_result"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.system_result.html#swmm.pandas.Output.system_result">[docs]</a>    <span class="nd">@output_open_handler</span>
    <span class="k">def</span> <span class="nf">system_result</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">time</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="p">],</span>
        <span class="n">asframe</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="n">DataFrame</span><span class="p">,</span> <span class="n">ndarray</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;For a given time, get all system attributes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        time: Union[str, int, datetime]</span>
<span class="sd">            The datetime or simulation index.</span>

<span class="sd">        asframe: bool</span>
<span class="sd">            A switch to return an indexed DataFrame. Set to False to get an array of values only, defaults to True.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Union[pd.DataFrame,np.ndarray]</span>
<span class="sd">            A DataFrame of attribute values in each row for requested simulation time.</span>

<span class="sd">        Examples</span>
<span class="sd">        ---------</span>

<span class="sd">        Pull all attributes at start of simulation</span>

<span class="sd">        &gt;&gt;&gt; from swmm.pandas import Output,test_out_path</span>
<span class="sd">        &gt;&gt;&gt; out = Output(test_out_path)</span>
<span class="sd">        &gt;&gt;&gt; out.system_result(&#39;1900-01-01&#39;)</span>
<span class="sd">                                    result</span>
<span class="sd">            attribute</span>
<span class="sd">            air_temp               70.000000</span>
<span class="sd">            rainfall                0.030000</span>
<span class="sd">            snow_depth              0.000000</span>
<span class="sd">            evap_infil_loss         0.013983</span>
<span class="sd">            runoff_flow             0.000000</span>
<span class="sd">            dry_weather_inflow      0.801000</span>
<span class="sd">            gw_inflow               0.101807</span>
<span class="sd">            rdii_inflow             0.000000</span>
<span class="sd">            direct_inflow           0.000000</span>
<span class="sd">            total_lateral_inflow    0.902807</span>
<span class="sd">            flood_losses            0.000000</span>
<span class="sd">            outfall_flows           0.000000</span>
<span class="sd">            volume_stored         168.436996</span>
<span class="sd">            evap_rate               0.000000</span>
<span class="sd">            ptnl_evap_rate          0.000000</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">timeIndex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_time2step</span><span class="p">([</span><span class="n">time</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">values</span> <span class="o">=</span> <span class="n">asarray</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">get_system_result</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle</span><span class="p">,</span> <span class="n">timeIndex</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">asframe</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">values</span>

        <span class="n">dfIndex</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span><span class="n">_enum_keys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">system_attributes</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;attribute&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">DataFrame</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">dfIndex</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">])</span></div>

<div class="viewcode-block" id="Output.getStructure"><a class="viewcode-back" href="../../../../reference/output/api/swmm.pandas.Output.getStructure.html#swmm.pandas.Output.getStructure">[docs]</a>    <span class="k">def</span> <span class="nf">getStructure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a structure object for a given list of links and nodes.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        link: Union[str, Sequence[str]]</span>
<span class="sd">            The list of links that belong to the structure.</span>
<span class="sd">        node: Union[str, Sequence[str]]</span>
<span class="sd">            The list of nodes that below to the structure.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Structure</span>
<span class="sd">            Structure comprised of the given links and nodes.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Structure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span></div>

    <span class="c1"># close outfile when object deleted</span>
    <span class="c1"># this doesn&#39;t always get called on sys.exit()</span>
    <span class="c1"># better to use output object with context</span>
    <span class="c1"># manager to ensure _open() and _close() are always closed</span>
    <span class="c1"># in some cases, you can get a memory leak message from swig:</span>
    <span class="c1"># &gt;&gt;&gt; exit()</span>
    <span class="c1"># swig/python detected a memory leak of type &#39;struct Handle *&#39;, no destructor found.</span>
    <span class="k">def</span> <span class="fm">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         Destructor for outfile handle</span>

<span class="sd">        :return: Nothing</span>
<span class="sd">        :rtype: NoReturn</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span>

    <span class="c1"># method used for context manager with statement</span>
    <span class="k">def</span> <span class="fm">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_open</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># method used for context manager with statement</span>
    <span class="k">def</span> <span class="fm">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">arg</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NoReturn</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_close</span><span class="p">()</span></div>
</code></pre></div>


  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      Mar 31, 2022
    
  </small>
</div>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2021, Constantine Karos.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    4.4.0.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.expand", "navigation.sections", "navigation.top", "search.share"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../../_static/javascripts/bundle.cf32e622.min.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
  </body>
</html>